import{V as f,a as C,j as e,W as b,R as D}from"./index-D0yRYkRK.js";import{A as S}from"./AdaptiveCard-C-V2GotN.js";import{T as y}from"./Tag-BiKNl5cb.js";import{u as j}from"./index-x4T1Tg8z.js";import{a as T}from"./ScheduleService-Cik7LwTI.js";import{c as u}from"./cloneDeep-6-NADjKH.js";import{R as L}from"./ReportDataTable-C0sCAkFY.js";import{B as _}from"./Button-BDkok-2I.js";import{G as N}from"./index-BitVXSiq.js";import{D as k}from"./DebouceInput-BQU4gTK3.js";import{g as v}from"./index-BF8ULv3O.js";import"./Card-CWfRWYfe.js";import"./classNames-CVFWYafE.js";import"./useControllableState-DfqdUqDh.js";import"./_getPrototype-CX1IXfHZ.js";import"./index-B0EMbVo3.js";import"./index-CLuxvRnD.js";import"./Select-B-WXjZfd.js";import"./extends-DynerIcZ.js";import"./floating-ui.dom-CV1Qg3mg.js";import"./index-BerKXuJv.js";import"./Input-CGGIPAMy.js";import"./isNil-BZddQIJL.js";import"./useDebounce-D4jIpCY2.js";import"./debounce-D_S4yuNl.js";import"./isSymbol-DKaeyIQo.js";const w={pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},I={tableData:w,selectedCustomer:[]},A=f(t=>({...I,setTableData:a=>t(()=>({tableData:a})),setSelectedCustomer:(a,s)=>t(r=>{const n=r.selectedCustomer;return a?{selectedCustomer:[...n,s]}:n.some(i=>s._id===i._id)?{selectedCustomer:n.filter(i=>i._id!==s._id)}:{selectedCustomer:n}}),setSelectAllCustomer:a=>t(()=>({selectedCustomer:a}))}));function x(){const{tableData:t,setTableData:a,selectedCustomer:s,setSelectedCustomer:r,setSelectAllCustomer:n}=A(d=>d),{data:i,error:m,isLoading:p,mutate:c}=j(["/api/customers",{...t}],([d,l])=>T(l),{revalidateOnFocus:!1}),g=(i==null?void 0:i.list)||[],h=(i==null?void 0:i.total)||0;return{customerList:g,customerListTotal:h,error:m,isLoading:p,tableData:t,mutate:c,setTableData:a,selectedCustomer:s,setSelectedCustomer:r,setSelectAllCustomer:n}}const R={Present:"bg-emerald-200 dark:bg-emerald-200 text-gray-900 dark:text-gray-900",Previous:"bg-red-200 dark:bg-red-200 text-gray-900 dark:text-gray-900"},K=()=>{const{customerList:t,customerListTotal:a,tableData:s,isLoading:r,setTableData:n,setSelectAllCustomer:i,selectedCustomer:m}=x(),p=C.useMemo(()=>[{header:"Employee Name",accessorKey:"employee_data.full_name"},{header:"Start Time",accessorKey:"start_time"},{header:"Off Time",accessorKey:"off_time"},{header:"Start Date",accessorKey:"formattedFromDate"},{header:"End Date",accessorKey:"formattedToDate"},{header:"Hours",accessorKey:"total_hours"},{header:"Rest Days",accessorKey:"rest_days"},{header:"Status",accessorKey:"status",cell:l=>{const o=l.row.original;return e.jsx("div",{className:"flex items-center",children:e.jsx(y,{className:R[o.status],children:e.jsx("span",{className:"capitalize",children:o.status==="Present"?"Present Schedule":"Past Schedule"})})})}}],[]),c=l=>{n(l),m.length>0&&i([])},g=l=>{const o=u(s);o.pageIndex=l,c(o)},h=l=>{const o=u(s);o.pageSize=Number(l),o.pageIndex=1,c(o)},d=l=>{const o=u(s);o.sort=l,c(o)};return e.jsx(L,{selectable:!0,columns:p,data:t,noData:!r&&t.length===0,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:r,pagingData:{total:a,pageIndex:s.pageIndex,pageSize:s.pageSize},checkboxChecked:l=>m.some(o=>o._id===l._id),onPaginationChange:g,onSelectChange:h,onSort:d})},P=()=>{const t=b();return e.jsx("div",{className:"flex flex-col md:flex-row gap-3",children:e.jsx(_,{variant:"default",icon:e.jsx(N,{className:"text-xl"}),onClick:()=>t("/reports"),children:"Return"})})},E=t=>{const{onInputChange:a,ref:s}=t;return e.jsx(k,{ref:s,placeholder:"Quick search...",suffix:e.jsx(v,{className:"text-lg"}),onChange:r=>a(r.target.value)})},z=()=>{const{tableData:t,setTableData:a}=x(),s=r=>{const n=u(t);n.query=r,n.pageIndex=1,typeof r=="string"&&r.length>1&&a(n),typeof r=="string"&&r.length===0&&a(n)};return e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:e.jsx(E,{onInputChange:s})})},me=()=>e.jsx(e.Fragment,{children:e.jsx(D,{children:e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Employee Schedule Report"}),e.jsx(P,{})]}),e.jsx(z,{}),e.jsx(K,{})]})})})});export{me as default};
