import{W as k,j as e,X as D,p as S,V as w,a as f,R as A}from"./index-D0yRYkRK.js";import{A as J}from"./AdaptiveCard-C-V2GotN.js";import{B as g}from"./Button-BDkok-2I.js";import"./isNil-BZddQIJL.js";import"./context-CCEg-Yz5.js";import"./index-BAiP7mQm.js";import"./Dialog-B-jFmH1-.js";import"./index-B0EMbVo3.js";import{c as b}from"./cloneDeep-6-NADjKH.js";import"./index-2Mnet4ey.js";import"./debounce-D_S4yuNl.js";import"./index-92mjx-Fn.js";import"./index-DLKOtp8K.js";import"./Drawer-CnBtluTf.js";import{v as _,C as I,h as z,g as F}from"./index-BF8ULv3O.js";import{C as O}from"./index-DasjbrLe.js";import"./FileItem-BgKRNRi7.js";import"./FormContainer-CcnkfPvj.js";import{I as R}from"./Input-CGGIPAMy.js";import"./index-DUpuQ3pa.js";import"./index-4hbIhcSA.js";import{t as B,N as E}from"./toast-CHrgrvAn.js";import{S as $}from"./Select-B-WXjZfd.js";import"./index-CI41wOCL.js";import{r as W}from"./index-CLuxvRnD.js";import{a as P}from"./DepartmentService-DVdaCjHZ.js";import{u as y}from"./index-x4T1Tg8z.js";import{D as q}from"./DataTable-H1C01gQK.js";import{S as V}from"./StickyFooter-CcqeJsEO.js";import{C as K}from"./ConfirmDialog-DLSh7DuB.js";import{D as M}from"./DebouceInput-BQU4gTK3.js";import"./Card-CWfRWYfe.js";import"./classNames-CVFWYafE.js";import"./index-Chjiymov.js";import"./useMergeRef-Ch7lRZ9Z.js";import"./floating-ui.dom-CV1Qg3mg.js";import"./index-BsIi-NiL.js";import"./proxy-CceN8Kfo.js";import"./index-C6AgsrmA.js";import"./CloseButton-V3ZvNBNU.js";import"./useControllableState-DfqdUqDh.js";import"./_getPrototype-CX1IXfHZ.js";import"./isSymbol-DKaeyIQo.js";import"./toString-Db7_635E.js";import"./index-BrAlWePZ.js";import"./DatePickerRange-DFku8Lpw.js";import"./StatusIcon-BDOIg_yW.js";import"./extends-DynerIcZ.js";import"./index-BerKXuJv.js";import"./useDebounce-D4jIpCY2.js";const Q=()=>{k();const a=[];return e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx(O,{className:"w-full",filename:"customerList.csv",data:a,children:e.jsx(g,{icon:e.jsx(_,{className:"text-xl"}),className:"w-full",children:"Download"})}),e.jsx(g,{variant:"solid",icon:e.jsx(I,{className:"text-xl"}),children:"Import"})]})},v="http://localhost:5000";async function U(a){const{token:o}=D();return S.fetchDataWithAxios({url:`${v}/api/job_title`,method:"get",params:a,headers:o?{Authorization:`Bearer ${o}`}:{}})}async function X(a){const{token:o}=D();return S.fetchDataWithAxios({url:`${v}/api/job_title/create`,method:"post",data:a,headers:o?{Authorization:`Bearer ${o}`}:{}})}async function Y(a){const{token:o}=D();return S.fetchDataWithAxios({url:`${v}/api/job_title/delete`,method:"post",data:a,headers:o?{Authorization:`Bearer ${o}`}:{}})}const G={pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},H={tableData:G,selectedJobTitle:[]},Z=w(a=>({...H,setTableData:o=>a(()=>({tableData:o})),setSelectedJobTitle:(o,r)=>a(i=>{const s=i.selectedJobTitle;return o?{selectedJobTitle:[...s,r]}:s.some(n=>r._id===n._id)?{selectedJobTitle:s.filter(n=>n._id!==r._id)}:{selectedJobTitle:s}}),setSelectAllJobTitle:o=>a(()=>({selectedJobTitle:o}))}));function j(){const{tableData:a,setTableData:o,selectedJobTitle:r,setSelectedJobTitle:i,setSelectAllJobTitle:s}=Z(u=>u),{data:n,error:m,isLoading:p,mutate:h}=y(["/api/departments",{...a}],([u,l])=>P(l),{revalidateOnFocus:!1}),{data:t,error:d,isLoading:T,mutate:x}=y(["/api/jobTitles",{...a}],([u,l])=>U(l),{revalidateOnFocus:!1}),C=async u=>{await Y({jobTitles:u}),x(),s([])};return{departmentList:(n==null?void 0:n.list)||[],departmentListTotal:(n==null?void 0:n.total)||0,jobTitlesList:(t==null?void 0:t.list)||[],jobTitlesTotal:(t==null?void 0:t.total)||0,error:m||d,isLoading:p||T,tableData:a,deleteJobTitles:C,mutateDepartment:h,mutateJobTitles:x,setTableData:o,selectedJobTitle:r,setSelectedJobTitle:i,setSelectAllJobTitle:s}}const ee=()=>{const{departmentList:a,mutateJobTitles:o}=j(),[r,i]=f.useState(""),[s,n]=f.useState(""),m=[{value:"",label:"Select Department"},...a.map(t=>({value:t._id,label:t.department_name}))],p=async()=>X({departmentId:r,jobTitle:s});y("/api/department/create",{revalidateOnFocus:!1});const h=async()=>{var t;try{if(r===""||s===""){B.push(e.jsx(E,{title:"error",type:"danger",children:"You have to fill all fields."}));return}const d=await p();(t=d==null?void 0:d.job_title)!=null&&t._id&&(o(),n(""),i(""))}catch(d){console.error("Error creating department:",d)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(R,{placeholder:"Job Title",value:s,onChange:t=>n(t.target.value)}),e.jsx($,{size:"lg",className:"mb-4",placeholder:"Select Department",options:m,value:m.find(t=>t.value===r)||null,onChange:t=>i(t?t.value:""),getOptionLabel:t=>t.label,getOptionValue:t=>t.value})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{variant:"solid",icon:e.jsx(W,{}),onClick:h,children:"Create"})})]})},te=()=>{const{jobTitlesList:a,jobTitlesTotal:o,tableData:r,isLoading:i,setTableData:s,setSelectAllJobTitle:n,setSelectedJobTitle:m,selectedJobTitle:p}=j(),h=f.useMemo(()=>[{header:"Job title",accessorKey:"job_title"},{header:"Department Name",accessorKey:"department_name"}],[]),t=l=>{s(l),p.length>0&&n([])},d=l=>{const c=b(r);c.pageIndex=l,t(c)},T=l=>{const c=b(r);c.pageSize=Number(l),c.pageIndex=1,t(c)},x=l=>{const c=b(r);c.sort=l,t(c)},C=(l,c)=>{m(l,c)},u=(l,c)=>{if(l){const N=c.map(L=>L.original);n(N)}else n([])};return e.jsx(q,{selectable:!0,columns:h,data:a,noData:!i&&a.length===0,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:i,pagingData:{total:o,pageIndex:r.pageIndex,pageSize:r.pageSize},checkboxChecked:l=>p.some(c=>c._id===l._id),onPaginationChange:d,onSelectChange:T,onSort:x,onCheckBoxChange:C,onIndeterminateCheckBoxChange:u})},ae=()=>{const{selectedJobTitle:a,mutateJobTitles:o,deleteJobTitles:r}=j(),[i,s]=f.useState(!1),n=()=>{s(!0)},m=()=>{s(!1)},p=async()=>{const h=a.map(t=>t._id).filter(t=>t!==void 0);if(a.length===0){console.error("No valid department IDs to delete");return}try{await r(h),s(!1),o()}catch(t){console.error("Error deleting department:",t)}};return e.jsxs(e.Fragment,{children:[a.length>0&&e.jsx(V,{className:" flex items-center justify-between py-4 bg-white dark:bg-gray-800",stickyClass:"-mx-4 sm:-mx-8 border-t border-gray-200 dark:border-gray-700 px-8",defaultClass:"container mx-auto px-8 rounded-xl border border-gray-200 dark:border-gray-600 mt-4",children:e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:a.length>0&&e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg text-primary",children:e.jsx(z,{})}),e.jsxs("span",{className:"font-semibold flex items-center gap-1",children:[e.jsxs("span",{className:"heading-text",children:[a.length," ","JobTitles"]}),e.jsx("span",{children:"selected"})]})]})}),e.jsx("div",{className:"flex items-center",children:e.jsx(g,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error",onClick:n,children:"Delete"})})]})})}),e.jsx(K,{isOpen:i,type:"danger",title:"Remove obTitless",onClose:m,onRequestClose:m,onCancel:m,onConfirm:p,children:e.jsxs("p",{children:[" ","Are you sure you want to remove these companies? This action can't be undo."," "]})})]})},oe=a=>{const{onInputChange:o,ref:r}=a;return e.jsx(M,{ref:r,placeholder:"Quick search...",suffix:e.jsx(F,{className:"text-lg"}),onChange:i=>o(i.target.value)})},se=()=>{const{tableData:a,setTableData:o}=j(),r=i=>{const s=b(a);s.query=i,s.pageIndex=1,typeof i=="string"&&i.length>1&&o(s),typeof i=="string"&&i.length===0&&o(s)};return e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:e.jsx(oe,{onInputChange:r})})},tt=()=>e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Add Job Title"}),e.jsx(Q,{})]}),e.jsx(J,{children:e.jsx(ee,{})}),e.jsxs(J,{children:[e.jsx(se,{}),e.jsx(te,{})]})]})}),e.jsx(ae,{})]});export{tt as default};
