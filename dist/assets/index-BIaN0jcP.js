import{V as f,a as C,j as e,W as D,R as b}from"./index-D0yRYkRK.js";import{A as S}from"./AdaptiveCard-C-V2GotN.js";import{u as j}from"./index-x4T1Tg8z.js";import{a as T}from"./AttendanceService-BTxDC8aW.js";import{c as u}from"./cloneDeep-6-NADjKH.js";import{R as y}from"./ReportDataTable-C0sCAkFY.js";import{B as L}from"./Button-BDkok-2I.js";import{G as A}from"./index-BitVXSiq.js";import{D as R}from"./DatePickerRange-DFku8Lpw.js";import"./Card-CWfRWYfe.js";import"./useControllableState-DfqdUqDh.js";import"./_getPrototype-CX1IXfHZ.js";import"./index-B0EMbVo3.js";import"./index-CLuxvRnD.js";import"./classNames-CVFWYafE.js";import"./Select-B-WXjZfd.js";import"./extends-DynerIcZ.js";import"./floating-ui.dom-CV1Qg3mg.js";import"./index-BerKXuJv.js";import"./useMergeRef-Ch7lRZ9Z.js";import"./Input-CGGIPAMy.js";import"./isNil-BZddQIJL.js";import"./CloseButton-V3ZvNBNU.js";const I={pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},w={purchasedProducts:"",purchaseChannel:["Retail Stores","Online Retailers","Resellers","Mobile Apps","Direct Sales"]},N={tableData:I,filterData:w,selectedCustomer:[]},k=f(s=>({...N,setFilterData:a=>s(()=>({filterData:a})),setTableData:a=>s(()=>({tableData:a})),setSelectedCustomer:(a,o)=>s(r=>{const t=r.selectedCustomer;return a?{selectedCustomer:[...t,o]}:t.some(n=>o.id===n.id)?{selectedCustomer:t.filter(n=>n.id!==o.id)}:{selectedCustomer:t}}),setSelectAllCustomer:a=>s(()=>({selectedCustomer:a}))}));function x(){const{tableData:s,setTableData:a,selectedCustomer:o,setSelectedCustomer:r,setSelectAllCustomer:t}=k(d=>d),{data:n,error:m,isLoading:p,mutate:c}=j(["/api/customers",{...s}],([d,l])=>T(l),{revalidateOnFocus:!1}),h=(n==null?void 0:n.list)||[],g=(n==null?void 0:n.total)||0;return{customerList:h,customerListTotal:g,error:m,isLoading:p,tableData:s,mutate:c,setTableData:a,selectedCustomer:o,setSelectedCustomer:r,setSelectAllCustomer:t}}const v=()=>{const{customerList:s,customerListTotal:a,tableData:o,isLoading:r,setTableData:t,setSelectAllCustomer:n,selectedCustomer:m}=x(),p=C.useMemo(()=>[{header:"Date",accessorKey:"date"},{header:"Employee Name",accessorKey:"employeeData.full_name"},{header:"Time In",accessorKey:"time_in"},{header:"Time Out",accessorKey:"time_out"},{header:"Total Hours",accessorKey:"total_hours"}],[]),c=l=>{t(l),m.length>0&&n([])},h=l=>{const i=u(o);i.pageIndex=l,c(i)},g=l=>{const i=u(o);i.pageSize=Number(l),i.pageIndex=1,c(i)},d=l=>{const i=u(o);i.sort=l,c(i)};return e.jsx(y,{selectable:!0,columns:p,data:s,noData:!r&&s.length===0,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:r,pagingData:{total:a,pageIndex:o.pageIndex,pageSize:o.pageSize},checkboxChecked:l=>m.some(i=>i.id===l.id),onPaginationChange:h,onSelectChange:g,onSort:d})},E=()=>{const s=D();return e.jsx("div",{className:"flex flex-col md:flex-row gap-3",children:e.jsx(L,{variant:"default",icon:e.jsx(A,{className:"text-xl"}),onClick:()=>s("/reports"),children:"Return"})})},F=s=>{const{onInputChange:a,ref:o}=s,r=t=>{t[0]&&t[1]?a(JSON.stringify([t[0],t[1]])):a("")};return e.jsx(e.Fragment,{children:e.jsx(R,{ref:o,placeholder:"Select date",onChange:r})})},K=()=>{const{tableData:s,setTableData:a}=x(),o=r=>{const t=u(s);t.query=r,t.pageIndex=1,typeof r=="string"&&r.length>1&&a(t),typeof r=="string"&&r.length===0&&a(t),console.log(r)};return e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:e.jsx(F,{onInputChange:o})})},re=()=>e.jsx(e.Fragment,{children:e.jsx(b,{children:e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Employee Attendance Report"}),e.jsx(E,{})]}),e.jsx(K,{}),e.jsx(v,{})]})})})});export{re as default};
