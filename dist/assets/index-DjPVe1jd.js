import{a as g,j as e,J as F,e as B,u as A}from"./index-D0yRYkRK.js";import{L as H}from"./Logo-Nfjv9JcT.js";import{c as w}from"./classNames-CVFWYafE.js";import{u as M,S as _}from"./StatusIcon-BDOIg_yW.js";import{e as D,f as O,g as Y,h as q,i as L,j as R,B as V}from"./Button-BDkok-2I.js";import{C as W}from"./CloseButton-V3ZvNBNU.js";import{m as z}from"./proxy-CceN8Kfo.js";import{I as v}from"./Input-CGGIPAMy.js";import{u as J,F as U,C as S}from"./index.esm-0Wd5ZTaL.js";import"./FormContainer-CcnkfPvj.js";import{F as I}from"./FormItem-BzCUTsvV.js";import{z as y,t as X}from"./index-DMQ2Y9Ia.js";import"./isNil-BZddQIJL.js";import"./index-BsIi-NiL.js";const N="warning",$={success:{backgroundColor:"bg-success-subtle",titleColor:"text-success",textColor:"text-success",iconColor:"text-success",icon:e.jsx(D,{})},info:{backgroundColor:"bg-info-subtle",titleColor:"text-info",textColor:"text-info",iconColor:"text-info",icon:e.jsx(O,{})},warning:{backgroundColor:"bg-warning-subtle",titleColor:"text-warning",textColor:"text-warning",iconColor:"text-warning",icon:e.jsx(Y,{})},danger:{backgroundColor:"bg-error-subtle",titleColor:"text-error",textColor:"text-error",iconColor:"text-error",icon:e.jsx(q,{})}},G=["success","danger","info","warning"],K=n=>{const{children:s,className:o,closable:r=!1,customClose:i,customIcon:c,duration:u=3e3,title:t=null,onClose:a,ref:b,showIcon:C=!1,triggerByToast:p=!1,...f}=n,l=(()=>{const{type:x=N}=n;return G.includes(x)?x:N})(),d=$[l],[j,m]=g.useState("show"),{clear:T}=M(a,u,u>0),P=x=>{m("hiding"),a==null||a(x),T(),p||setTimeout(()=>{m("hide")},400)},k=()=>e.jsx("div",{className:"cursor-pointer",role:"presentation",onClick:x=>P(x),children:i||e.jsx(W,{resetDefaultClass:!0,className:"text-lg outline-none"})}),E=w("alert",d.backgroundColor,d.textColor,t?"":"font-semibold",r?"justify-between":"",r&&!t?"items-center":"",!p&&"rounded-xl",o);return j==="hide"?null:e.jsxs(z.div,{ref:b,className:E,initial:{opacity:1},animate:j==="hiding"?"exit":"animate",transition:{duration:.25,type:"tween"},variants:{animate:{opacity:1},exit:{opacity:0}},...f,children:[e.jsxs("div",{className:w("flex gap-2",!t&&s?"items-center":"",t&&s?"mt-0.5":""),children:[C&&e.jsx(_,{iconColor:d.iconColor,custom:c,type:l}),e.jsxs("div",{children:[t?e.jsx("div",{className:w("font-semibold text-lg mb-1",d.titleColor),children:t}):null,s]})]}),r?k():null]})},Q=n=>{const{onVisibleChange:s,ref:o,...r}=n,[i,c]=g.useState("password"),u=t=>{t.preventDefault();const a=i==="password"?"text":"password";c(a),s==null||s(a==="text")};return e.jsx(v,{...r,ref:o,type:i,suffix:e.jsx("span",{className:"cursor-pointer select-none text-xl",role:"button",onClick:u,children:i==="password"?e.jsx(L,{}):e.jsx(R,{})})})},Z=y.object({email:y.string({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:y.string({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),ee=n=>{var p,f,h;const[s,o]=g.useState(!1),{disableSubmit:r=!1,className:i,setMessage:c}=n,{handleSubmit:u,formState:{errors:t},control:a}=J({defaultValues:{email:"",password:""},resolver:X(Z)}),{signIn:b}=F(),C=async l=>{const{email:d,password:j}=l;if(!r){o(!0);const m=await b({email:d,password:j});(m==null?void 0:m.status)==="failed"&&(c==null||c(m.message))}o(!1)};return e.jsx("div",{className:i,children:e.jsxs(U,{onSubmit:u(C),children:[e.jsx(I,{label:"Email",invalid:!!t.email,errorMessage:(p=t.email)==null?void 0:p.message,children:e.jsx(S,{name:"email",control:a,render:({field:l})=>e.jsx(v,{type:"email",placeholder:"Email",autoComplete:"off",...l})})}),e.jsx(I,{label:"Password",invalid:!!t.password,errorMessage:(f=t.password)==null?void 0:f.message,className:B((h=t.password)!=null&&h.message?"mb-8":""),children:e.jsx(S,{name:"password",control:a,rules:{required:!0},render:({field:l})=>e.jsx(Q,{type:"text",placeholder:"Password",autoComplete:"off",...l})})}),e.jsx(V,{block:!0,loading:s,variant:"solid",type:"submit",children:s?"Signing in...":"Sign In"})]})})};function se(n=3e3){const[s,o]=g.useState("");return g.useEffect(()=>{if(s){const r=setTimeout(()=>o(""),n);return()=>{clearTimeout(r)}}},[s]),[s,o]}const te=({disableSubmit:n})=>{const[s,o]=se(),r=A(i=>i.mode);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsx(H,{type:"streamline",mode:r,imgClass:"mx-auto",logoWidth:60})}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"mb-2",children:"Welcome back!"}),e.jsx("p",{className:"font-semibold heading-text",children:"Please enter your credentials to sign in!"})]}),s&&e.jsx(K,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx("span",{className:"break-all",children:s})}),e.jsx(ee,{disableSubmit:n,setMessage:o})]})},je=()=>e.jsx(te,{});export{te as SignInBase,je as default};
