import{a as o,f as R,j as e,W as _,R as G,y as M}from"./index-D0yRYkRK.js";import{A as m}from"./AdaptiveCard-C-V2GotN.js";import{B as E}from"./Button-BDkok-2I.js";import{G as F}from"./index-BitVXSiq.js";import{z as P,A as z}from"./index-BF8ULv3O.js";import{a as L,b as H,c as I,d as Y,e as $,C as u,f as g,g as J}from"./context-CCEg-Yz5.js";import"./isNil-BZddQIJL.js";import"./index-BAiP7mQm.js";import"./Dialog-B-jFmH1-.js";import"./index-B0EMbVo3.js";import"./cloneDeep-6-NADjKH.js";import"./index-2Mnet4ey.js";import"./debounce-D_S4yuNl.js";import"./index-92mjx-Fn.js";import"./index-DLKOtp8K.js";import"./Drawer-CnBtluTf.js";import{g as V}from"./employeeService-8m6wHAGi.js";import"./Card-CWfRWYfe.js";import"./classNames-CVFWYafE.js";import"./index-Chjiymov.js";import"./useMergeRef-Ch7lRZ9Z.js";import"./floating-ui.dom-CV1Qg3mg.js";import"./index-BsIi-NiL.js";import"./proxy-CceN8Kfo.js";import"./index-C6AgsrmA.js";import"./CloseButton-V3ZvNBNU.js";import"./index-CLuxvRnD.js";import"./useControllableState-DfqdUqDh.js";import"./_getPrototype-CX1IXfHZ.js";import"./isSymbol-DKaeyIQo.js";import"./toString-Db7_635E.js";import"./index-BrAlWePZ.js";const B=["line","bar","area"],W=t=>{const{series:n=[],width:f="100%",height:w=300,xAxis:O,customOptions:j,type:i="line",direction:x,donutTitle:b,donutText:v,className:A,...N}=t,h=o.useRef(null),S=o.useMemo(()=>{switch(i){case"line":return L;case"bar":return $;case"area":return Y;case"donut":return I;case"radar":return H;default:return L}},[i]);let c=JSON.parse(JSON.stringify(S));const d=window.innerWidth<768,D=o.useCallback(()=>{if(h.current){const p=h.current.querySelectorAll("div.apexcharts-legend")[0];x===R&&(p.style.right="auto",p.style.left="0"),d&&(p.style.position="relative",p.style.top="0",p.style.justifyContent="start",p.style.padding="0")}},[x,d]);return o.useEffect(()=>{B.includes(i)&&D()},[i,D]),B.includes(i)&&(c.xaxis.categories=O),j&&(c={...c,...j}),i==="donut"&&(b&&(c.plotOptions.pie.donut.labels.total.label=b),v&&(c.plotOptions.pie.donut.labels.total.formatter=()=>v)),e.jsx("div",{ref:h,style:x===R?{direction:"ltr"}:{},className:"chartRef",children:e.jsx(u,{options:c,type:i,series:n,width:f,height:w,className:A,...N})})},q=({isViewed:t,handleChange:n})=>{const f=_();return e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx(E,{variant:"default",icon:e.jsx(F,{className:"text-xl"}),onClick:()=>f("/reports"),children:"Return"}),e.jsx(E,{icon:t===!0?e.jsx(P,{className:"text-xl"}):e.jsx(z,{className:"text-xl"}),className:"w-full",onClick:()=>n(t),children:"View"})]})},U=({companyChartData:t})=>e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsx("div",{children:"Company Population"}),e.jsx(u,{options:{colors:g,labels:t.labels,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},series:t.series,height:300,type:"pie"})]}),K=({departmentChartData:t})=>e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsx("div",{children:"Department Population"}),e.jsx(u,{options:{colors:g,labels:t.labels,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},series:t.series,height:300,type:"pie"})]}),Q=({genderChartData:t})=>e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsx("div",{children:"Company Population"}),e.jsx(u,{options:{colors:g,labels:t.labels,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},series:t.series,height:300,type:"pie"})]}),X=({ageChartData:t})=>e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsx("div",{children:"Age Demographics"}),e.jsx(W,{type:"radar",customOptions:{xaxis:{categories:t.labels},yaxis:{show:!1},tooltip:{custom:function({dataPointIndex:n}){return`
                                <div class="py-2 px-4 rounded-xl">
                                    <div class="flex items-center gap-2">
                                        <div class="h-[10px] w-[10px] rounded-full" style="background-color: ${g[0]}"></div>
                                        <div class="flex gap-2">${t.labels[n]}:
                                            <span class="font-bold">${t.series[n]}</span>
                                        </div>
                                    </div>
                                </div>
                            `}}},series:[{name:"Age Group Count",data:t.series}]})]}),Z=({civilStatusChartData:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Civil Status Demographics"}),e.jsx(u,{options:{colors:g,labels:t.labels,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},series:t.series,height:300,type:"donut"})]}),ee=({hiredByYearChartData:t})=>e.jsx(u,{options:{chart:{zoom:{enabled:!1}},colors:[J],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.9,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},labels:t.labels,xaxis:{type:"category"},yaxis:{opposite:!0},legend:{horizontalAlign:"left"}},type:"area",series:[{name:"Employees Hired",data:t.series}],height:300}),Be=()=>{const[t,n]=o.useState(!1);o.useState([]);const f=l=>{console.log(l),n(!l)},[w,O]=o.useState({labels:[],series:[]}),[j,i]=o.useState({labels:[],series:[]}),[x,b]=o.useState({labels:[],series:[]}),[v,A]=o.useState({labels:[],series:[]}),[N,h]=o.useState({labels:[],series:[]}),[S,c]=o.useState({labels:[],series:[]}),d=(l,s)=>{const r=new Map;for(let a of l){const C=s.split(".").reduce((y,k)=>y==null?void 0:y[k],a)||"Unknown";r.set(C,(r.get(C)||0)+1)}return{labels:Array.from(r.keys()),series:Array.from(r.values())}},D=l=>{const s={"18-24":0,"25-31":0,"32-38":0,"39-45":0,"46-100+":0};for(let r of l){const a=parseInt(r.age,10);a>=18&&a<=24?s["18-24"]++:a>=25&&a<=31?s["25-31"]++:a>=32&&a<=38?s["32-38"]++:a>=39&&a<=45?s["39-45"]++:s["46-100+"]++}return{labels:Object.keys(s),series:Object.values(s)}},p=l=>{const s=new Map;for(let r of l){const a=new Date(r.official_start_date).getFullYear().toString();s.set(a,(s.get(a)||0)+1)}return{labels:Array.from(s.keys()),series:Array.from(s.values())}};return o.useEffect(()=>{(async()=>{try{const s=await V();if(!s||!s.employeeData){console.error("Invalid data structure:",s);return}console.log(s);const r=d(s.employeeData,"company.company_name"),a=d(s.employeeData,"department.department_name"),C=d(s.employeeData,"gender"),y=d(s.employeeData,"civil_status"),k=D(s.employeeData),T=p(s.employeeData);O(r),i(a),b(C),A(y),h(k),c(T)}catch(s){console.error("Error fetching employee data:",s)}})()},[]),e.jsx(e.Fragment,{children:e.jsx(G,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Organizational Profile"}),e.jsx(q,{isViewed:t,handleChange:f})]}),e.jsxs("div",{className:M(t===!0?"grid grid-cols-1 gap-5":"grid grid-cols-1 gap-5 xl:grid-cols-2"),children:[e.jsx(m,{children:e.jsx(U,{companyChartData:w})}),e.jsx(m,{children:e.jsx(K,{departmentChartData:j})}),e.jsx(m,{children:e.jsx(Q,{genderChartData:x})}),e.jsx(m,{children:e.jsx(X,{ageChartData:N})}),e.jsx(m,{children:e.jsx(Z,{civilStatusChartData:v})}),e.jsx(m,{children:e.jsx(ee,{hiredByYearChartData:S})})]})]})})})};export{Be as default};
