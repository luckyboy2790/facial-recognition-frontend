import{Y as k,a as u,X as D,j as e,R as F}from"./index-D0yRYkRK.js";import{B as a}from"./Button-BDkok-2I.js";import{t as m,N as l}from"./toast-CHrgrvAn.js";import{C as T}from"./ConfirmDialog-DLSh7DuB.js";import{d as O,b as _}from"./ScheduleService-Cik7LwTI.js";import{S as B}from"./ScheduleForm-DGkTMXpF.js";import{s as R}from"./sleep-BvINh1mj.js";import{N as I}from"./NoUserFound-CrXboe5I.js";import{j as $,i as A}from"./index-BF8ULv3O.js";import{u as E}from"./index-x4T1Tg8z.js";import"./classNames-CVFWYafE.js";import"./StatusIcon-BDOIg_yW.js";import"./CloseButton-V3ZvNBNU.js";import"./proxy-CceN8Kfo.js";import"./index-BAiP7mQm.js";import"./useMergeRef-Ch7lRZ9Z.js";import"./floating-ui.dom-CV1Qg3mg.js";import"./index-BsIi-NiL.js";import"./Dialog-B-jFmH1-.js";import"./index-C6AgsrmA.js";import"./index-Chjiymov.js";import"./index.esm-0Wd5ZTaL.js";import"./FormContainer-CcnkfPvj.js";import"./BottomStickyBar-B9Gkuokk.js";import"./Card-CWfRWYfe.js";import"./Select-B-WXjZfd.js";import"./extends-DynerIcZ.js";import"./FormItem-BzCUTsvV.js";import"./index-2Mnet4ey.js";import"./cloneDeep-6-NADjKH.js";import"./useControllableState-DfqdUqDh.js";import"./_getPrototype-CX1IXfHZ.js";import"./isSymbol-DKaeyIQo.js";import"./toString-Db7_635E.js";import"./FileItem-BgKRNRi7.js";import"./DatePickerRange-DFku8Lpw.js";import"./Input-CGGIPAMy.js";import"./isNil-BZddQIJL.js";import"./index-92mjx-Fn.js";import"./index-BrAlWePZ.js";import"./Drawer-CnBtluTf.js";import"./index-DUpuQ3pa.js";import"./index-4hbIhcSA.js";import"./index-B0EMbVo3.js";import"./index-CLuxvRnD.js";import"./index-CI41wOCL.js";import"./context-CCEg-Yz5.js";import"./debounce-D_S4yuNl.js";import"./NumericInput-Buu8NxfF.js";import"./index-DLKOtp8K.js";import"./employeeService-8m6wHAGi.js";import"./format-BzRktsyD.js";import"./index-DMQ2Y9Ia.js";const L="http://localhost:5000",Le=()=>{const{id:r}=k(),{data:o,isLoading:c}=E([`/api/schedule${r}`,{id:r}],([t,s])=>O(s),{revalidateOnFocus:!1,revalidateIfStale:!1}),[h,i]=u.useState(!1),[f,p]=u.useState(!1),{token:d}=D(),x=async t=>{if(console.log("Submitted values",t),p(!0),!(await fetch(`${L}/api/schedule/update_schedule/${r}`,{method:"POST",headers:{"Content-Type":"application/json",...d?{Authorization:`Bearer ${d}`}:{}},body:JSON.stringify(t)})).ok){m.push(e.jsx(l,{type:"warning",children:"Something went wrong!"}),{placement:"top-center"});return}p(!1),m.push(e.jsx(l,{type:"success",children:"Changes Saved!"}),{placement:"top-center"}),await R(800),window.location.href="/schedule"},j=()=>{if(console.log(o),o){const{employee:t,start_time:s,off_time:b,rest_days:C,from:w,to:v,total_hours:N}=o.schedule;return{employee:t,start_time:s,off_time:b,rest_days:C,from:w,to:v,total_hours:N}}return{}},g=async()=>{i(!0),await _({scheduleIds:[r]}),m.push(e.jsx(l,{type:"success",children:"Schedule deleted!"}),{placement:"top-center"}),window.location.href="/schedule"},S=()=>{i(!0)},n=()=>{i(!1)},y=()=>{history.back()};return e.jsxs(e.Fragment,{children:[!c&&!o&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(I,{height:280,width:280}),e.jsx("h3",{className:"mt-8",children:"No user found!"})]}),!c&&o&&e.jsxs(e.Fragment,{children:[e.jsx(B,{defaultValues:j(),newSchedule:!1,onFormSubmit:x,children:e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx(a,{className:"ltr:mr-3 rtl:ml-3",type:"button",variant:"plain",icon:e.jsx($,{}),onClick:y,children:"Back"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(a,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx(A,{}),onClick:S,children:"Delete"}),e.jsx(a,{variant:"solid",type:"submit",loading:f,children:"Save"})]})]})})}),e.jsx(T,{isOpen:h,type:"danger",title:"Remove customers",onClose:n,onRequestClose:n,onCancel:n,onConfirm:g,children:e.jsxs("p",{children:["Are you sure you want to remove this customer? This action can't be undo."," "]})})]})]})};export{Le as default};
