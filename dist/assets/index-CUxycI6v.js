import{V as C,a as b,j as e,W as j,R as y}from"./index-D0yRYkRK.js";import{A as D}from"./AdaptiveCard-C-V2GotN.js";import{b as S}from"./employeeService-8m6wHAGi.js";import{u as T}from"./index-x4T1Tg8z.js";import{c as u}from"./cloneDeep-6-NADjKH.js";import{R as L}from"./ReportDataTable-C0sCAkFY.js";import{B as f}from"./Button-BDkok-2I.js";import{G as w}from"./index-BitVXSiq.js";import{C as v}from"./index-DasjbrLe.js";import{v as N,g as _}from"./index-BF8ULv3O.js";import{D as A}from"./DebouceInput-BQU4gTK3.js";import"./Card-CWfRWYfe.js";import"./useControllableState-DfqdUqDh.js";import"./_getPrototype-CX1IXfHZ.js";import"./index-B0EMbVo3.js";import"./index-CLuxvRnD.js";import"./classNames-CVFWYafE.js";import"./Select-B-WXjZfd.js";import"./extends-DynerIcZ.js";import"./floating-ui.dom-CV1Qg3mg.js";import"./index-BerKXuJv.js";import"./index-Chjiymov.js";import"./Input-CGGIPAMy.js";import"./isNil-BZddQIJL.js";import"./useDebounce-D4jIpCY2.js";import"./debounce-D_S4yuNl.js";import"./isSymbol-DKaeyIQo.js";const E={pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},I={tableData:E,selectedCustomer:[]},k=C(s=>({...I,setTableData:t=>s(()=>({tableData:t})),setSelectedCustomer:(t,a)=>s(o=>{const n=o.selectedCustomer;return t?{selectedCustomer:[...n,a]}:n.some(l=>a._id===l._id)?{selectedCustomer:n.filter(l=>l._id!==a._id)}:{selectedCustomer:n}}),setSelectAllCustomer:t=>s(()=>({selectedCustomer:t}))}));function g(){const{tableData:s,setTableData:t,selectedCustomer:a,setSelectedCustomer:o,setSelectAllCustomer:n}=k(d=>d),{data:l,error:m,isLoading:p,mutate:c}=T(["/api/customers",{...s}],([d,r])=>S(r),{revalidateOnFocus:!1}),x=(l==null?void 0:l.list)||[],h=(l==null?void 0:l.total)||0;return{customerList:x,customerListTotal:h,error:m,isLoading:p,tableData:s,mutate:c,setTableData:t,selectedCustomer:a,setSelectedCustomer:o,setSelectAllCustomer:n}}const R=()=>{const{customerList:s,customerListTotal:t,tableData:a,isLoading:o,setTableData:n,setSelectAllCustomer:l,selectedCustomer:m}=g(),p=b.useMemo(()=>[{header:"Employee Name",accessorKey:"full_name"},{header:"Age",accessorKey:"age"},{header:"Gender",accessorKey:"gender"},{header:"Civil Status",accessorKey:"civil_status"},{header:"Conttact Number",id:"contactNumber",cell:r=>e.jsxs("div",{children:[r.row.original.dial_code," ",r.row.original.phone_number]})},{header:"Email",accessorKey:"email"},{header:"Employment Status",accessorKey:"employee_type"},{header:"Employment Status",accessorKey:"employee_status"}],[]),c=r=>{n(r),m.length>0&&l([])},x=r=>{const i=u(a);i.pageIndex=r,c(i)},h=r=>{const i=u(a);i.pageSize=Number(r),i.pageIndex=1,c(i)},d=r=>{const i=u(a);i.sort=r,c(i)};return e.jsx(L,{selectable:!0,columns:p,data:s,noData:!o&&s.length===0,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:o,pagingData:{total:t,pageIndex:a.pageIndex,pageSize:a.pageSize},checkboxChecked:r=>m.some(i=>i._id===r._id),onPaginationChange:x,onSelectChange:h,onSort:d})},K=()=>{const s=j(),{customerList:t}=g();return e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx(f,{variant:"default",icon:e.jsx(w,{className:"text-xl"}),onClick:()=>s("/reports"),children:"Return"}),e.jsx(v,{className:"w-full",filename:"customerList.csv",data:t,children:e.jsx(f,{icon:e.jsx(N,{className:"text-xl"}),className:"w-full",children:"Download"})})]})},z=s=>{const{onInputChange:t,ref:a}=s;return e.jsx(A,{ref:a,placeholder:"Quick search...",suffix:e.jsx(_,{className:"text-lg"}),onChange:o=>t(o.target.value)})},G=()=>{const{tableData:s,setTableData:t}=g(),a=o=>{const n=u(s);n.query=o,n.pageIndex=1,typeof o=="string"&&o.length>1&&t(n),typeof o=="string"&&o.length===0&&t(n)};return e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:e.jsx(z,{onInputChange:a})})},de=()=>e.jsx(e.Fragment,{children:e.jsx(y,{children:e.jsx(D,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Employee List Report"}),e.jsx(K,{})]}),e.jsx(G,{}),e.jsx(R,{})]})})})});export{de as default};
