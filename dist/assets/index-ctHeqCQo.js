import{V as C,a as b,j as e,W as j,R as D}from"./index-D0yRYkRK.js";import{A as S}from"./AdaptiveCard-C-V2GotN.js";import{b as L}from"./employeeService-8m6wHAGi.js";import{u as v}from"./index-x4T1Tg8z.js";import{c as h}from"./cloneDeep-6-NADjKH.js";import{R as T}from"./ReportDataTable-C0sCAkFY.js";import{B as g}from"./Button-BDkok-2I.js";import{G as y}from"./index-BitVXSiq.js";import{C as _}from"./index-DasjbrLe.js";import{v as w}from"./index-BF8ULv3O.js";import"./Card-CWfRWYfe.js";import"./useControllableState-DfqdUqDh.js";import"./_getPrototype-CX1IXfHZ.js";import"./index-B0EMbVo3.js";import"./index-CLuxvRnD.js";import"./classNames-CVFWYafE.js";import"./Select-B-WXjZfd.js";import"./extends-DynerIcZ.js";import"./floating-ui.dom-CV1Qg3mg.js";import"./index-BerKXuJv.js";import"./index-Chjiymov.js";const N={pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},A={tableData:N,selectedCustomer:[]},k=C(s=>({...A,setTableData:o=>s(()=>({tableData:o})),setSelectedCustomer:(o,r)=>s(n=>{const i=n.selectedCustomer;return o?{selectedCustomer:[...i,r]}:i.some(a=>r._id===a._id)?{selectedCustomer:i.filter(a=>a._id!==r._id)}:{selectedCustomer:i}}),setSelectAllCustomer:o=>s(()=>({selectedCustomer:o}))}));function f(){const{tableData:s,setTableData:o,selectedCustomer:r,setSelectedCustomer:n,setSelectAllCustomer:i}=k(d=>d),{data:a,error:m,isLoading:u,mutate:c}=v(["/api/customers",{...s}],([d,t])=>L(t),{revalidateOnFocus:!1}),p=(a==null?void 0:a.list)||[],x=(a==null?void 0:a.total)||0;return{customerList:p,customerListTotal:x,error:m,isLoading:u,tableData:s,mutate:c,setTableData:o,selectedCustomer:r,setSelectedCustomer:n,setSelectAllCustomer:i}}const R=()=>{const{customerList:s,customerListTotal:o,tableData:r,isLoading:n,setTableData:i,setSelectAllCustomer:a,selectedCustomer:m}=f();console.log(s);const u=b.useMemo(()=>[{header:"Employee Name",accessorKey:"full_name"},{header:"Department",accessorKey:"department.department_name"},{header:"Position",accessorKey:"job_title.job_title"},{header:"Birthday",accessorKey:"birthday"},{header:"Contact Number",id:"contactNumber",cell:t=>e.jsxs("div",{children:[t.row.original.dial_code," ",t.row.original.phone_number]})}],[]),c=t=>{i(t),m.length>0&&a([])},p=t=>{const l=h(r);l.pageIndex=t,c(l)},x=t=>{const l=h(r);l.pageSize=Number(t),l.pageIndex=1,c(l)},d=t=>{const l=h(r);l.sort=t,c(l)};return e.jsx(T,{selectable:!0,columns:u,data:s,noData:!n&&s.length===0,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:n,pagingData:{total:o,pageIndex:r.pageIndex,pageSize:r.pageSize},checkboxChecked:t=>m.some(l=>l._id===t._id),onPaginationChange:p,onSelectChange:x,onSort:d})},E=()=>{const s=j(),{customerList:o}=f();return e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx(g,{variant:"default",icon:e.jsx(y,{className:"text-xl"}),onClick:()=>s("/reports"),children:"Return"}),e.jsx(_,{className:"w-full",filename:"customerList.csv",data:o,children:e.jsx(g,{icon:e.jsx(w,{className:"text-xl"}),className:"w-full",children:"Download"})})]})},te=()=>e.jsx(e.Fragment,{children:e.jsx(D,{children:e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Employee Birthdays"}),e.jsx(E,{})]}),e.jsx(R,{})]})})})});export{te as default};
