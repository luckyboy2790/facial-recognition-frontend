import{V as v,a as S,j as e,W as T,R as N}from"./index-D0yRYkRK.js";import{A as L}from"./AdaptiveCard-C-V2GotN.js";import{T as w}from"./Tag-BiKNl5cb.js";import{b as F}from"./employeeService-8m6wHAGi.js";import{u as I}from"./index-x4T1Tg8z.js";import{c as g}from"./cloneDeep-6-NADjKH.js";import{R}from"./ReportDataTable-C0sCAkFY.js";import{B as f}from"./Button-BDkok-2I.js";import{G as k}from"./index-BitVXSiq.js";import{D as A}from"./DebouceInput-BQU4gTK3.js";import{g as P,t as z}from"./index-BF8ULv3O.js";import{D as O}from"./Dialog-B-jFmH1-.js";import{C as j}from"./index-2Mnet4ey.js";import{I as E}from"./Input-CGGIPAMy.js";import{u as K,F as G,C as b}from"./index.esm-0Wd5ZTaL.js";import"./FormContainer-CcnkfPvj.js";import{F as D}from"./FormItem-BzCUTsvV.js";import{z as h,t as q}from"./index-DMQ2Y9Ia.js";import"./Card-CWfRWYfe.js";import"./classNames-CVFWYafE.js";import"./useControllableState-DfqdUqDh.js";import"./_getPrototype-CX1IXfHZ.js";import"./index-B0EMbVo3.js";import"./index-CLuxvRnD.js";import"./Select-B-WXjZfd.js";import"./extends-DynerIcZ.js";import"./floating-ui.dom-CV1Qg3mg.js";import"./index-BerKXuJv.js";import"./useDebounce-D4jIpCY2.js";import"./debounce-D_S4yuNl.js";import"./isSymbol-DKaeyIQo.js";import"./index-C6AgsrmA.js";import"./index-Chjiymov.js";import"./CloseButton-V3ZvNBNU.js";import"./proxy-CceN8Kfo.js";import"./toString-Db7_635E.js";import"./isNil-BZddQIJL.js";import"./index-BsIi-NiL.js";const M={pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},B={purchasedProducts:"",purchaseChannel:["Retail Stores","Online Retailers","Resellers","Mobile Apps","Direct Sales"]},V={tableData:M,filterData:B,selectedCustomer:[]},W=v(s=>({...V,setFilterData:t=>s(()=>({filterData:t})),setTableData:t=>s(()=>({tableData:t})),setSelectedCustomer:(t,o)=>s(l=>{const n=l.selectedCustomer;return t?{selectedCustomer:[...n,o]}:n.some(i=>o.id===i.id)?{selectedCustomer:n.filter(i=>i.id!==o.id)}:{selectedCustomer:n}}),setSelectAllCustomer:t=>s(()=>({selectedCustomer:t}))}));function C(){const{tableData:s,filterData:t,setTableData:o,selectedCustomer:l,setSelectedCustomer:n,setSelectAllCustomer:i,setFilterData:u}=W(r=>r),{data:c,error:d,isLoading:x,mutate:m}=I(["/api/customers",{...s,...t}],([r,y])=>F(y),{revalidateOnFocus:!1}),p=(c==null?void 0:c.list)||[],a=(c==null?void 0:c.total)||0;return{customerList:p,customerListTotal:a,error:d,isLoading:x,tableData:s,filterData:t,mutate:m,setTableData:o,selectedCustomer:l,setSelectedCustomer:n,setSelectAllCustomer:i,setFilterData:u}}const Q={active:"bg-emerald-200 dark:bg-emerald-200 text-gray-900 dark:text-gray-900",archive:"bg-red-200 dark:bg-red-200 text-gray-900 dark:text-gray-900"},_=({row:s})=>e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"hover:text-primary ml-2 rtl:mr-2 font-semibold text-gray-900 dark:text-gray-100",children:s.name})}),$=()=>{const{customerList:s,customerListTotal:t,tableData:o,isLoading:l,setTableData:n,setSelectAllCustomer:i,selectedCustomer:u}=C(),c=S.useMemo(()=>[{header:"Name",accessorKey:"name",cell:a=>{const r=a.row.original;return e.jsx(_,{row:r})}},{header:"Email",accessorKey:"email"},{header:"location",accessorKey:"personalInfo.location"},{header:"Status",accessorKey:"status",cell:a=>{const r=a.row.original;return e.jsx("div",{className:"flex items-center",children:e.jsx(w,{className:Q[r.status],children:e.jsx("span",{className:"capitalize",children:r.status})})})}},{header:"Spent",accessorKey:"totalSpending",cell:a=>e.jsxs("span",{children:["$",a.row.original.totalSpending]})}],[]),d=a=>{n(a),u.length>0&&i([])},x=a=>{const r=g(o);r.pageIndex=a,d(r)},m=a=>{const r=g(o);r.pageSize=Number(a),r.pageIndex=1,d(r)},p=a=>{const r=g(o);r.sort=a,d(r)};return e.jsx(R,{selectable:!0,columns:c,data:s,noData:!l&&s.length===0,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:l,pagingData:{total:t,pageIndex:o.pageIndex,pageSize:o.pageSize},checkboxChecked:a=>u.some(r=>r.id===a.id),onPaginationChange:x,onSelectChange:m,onSort:p})},H=()=>{const s=T();return e.jsx("div",{className:"flex flex-col md:flex-row gap-3",children:e.jsx(f,{variant:"default",icon:e.jsx(k,{className:"text-xl"}),onClick:()=>s("/reports"),children:"Return"})})},J=s=>{const{onInputChange:t,ref:o}=s;return e.jsx(A,{ref:o,placeholder:"Quick search...",suffix:e.jsx(P,{className:"text-lg"}),onChange:l=>t(l.target.value)})},U=["Retail Stores","Online Retailers","Resellers","Mobile Apps","Direct Sales"],X=h.object({purchasedProducts:h.string(),purchaseChannel:h.array(h.string())}),Y=()=>{const[s,t]=S.useState(!1),{filterData:o,setFilterData:l}=C(),n=()=>{t(!0)},i=()=>{t(!1)},{handleSubmit:u,reset:c,control:d}=K({defaultValues:o,resolver:q(X)}),x=m=>{l(m),t(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(f,{icon:e.jsx(z,{}),onClick:()=>n(),children:"Filter"}),e.jsxs(O,{isOpen:s,onClose:i,onRequestClose:i,children:[e.jsx("h4",{className:"mb-4",children:"Filter"}),e.jsxs(G,{onSubmit:u(x),children:[e.jsx(D,{label:"Products",children:e.jsx(b,{name:"purchasedProducts",control:d,render:({field:m})=>e.jsx(E,{type:"text",autoComplete:"off",placeholder:"Search by purchased product",...m})})}),e.jsx(D,{label:"Purchase Channel",children:e.jsx(b,{name:"purchaseChannel",control:d,render:({field:m})=>e.jsx(j.Group,{vertical:!0,className:"flex mt-4",...m,children:U.map((p,a)=>e.jsx(j,{name:m.name,value:p,className:"justify-between flex-row-reverse heading-text",children:p},p+a))})})}),e.jsxs("div",{className:"flex justify-end items-center gap-2 mt-4",children:[e.jsx(f,{type:"button",onClick:()=>c(),children:"Reset"}),e.jsx(f,{type:"submit",variant:"solid",children:"Apply"})]})]})]})]})},Z=()=>{const{tableData:s,setTableData:t}=C(),o=l=>{const n=g(s);n.query=l,n.pageIndex=1,typeof l=="string"&&l.length>1&&t(n),typeof l=="string"&&l.length===0&&t(n)};return e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx(J,{onInputChange:o}),e.jsx(Y,{})]})},Ke=()=>e.jsx(e.Fragment,{children:e.jsx(N,{children:e.jsx(L,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Employee Leaves Report"}),e.jsx(H,{})]}),e.jsx(Z,{}),e.jsx($,{})]})})})});export{Ke as default};
