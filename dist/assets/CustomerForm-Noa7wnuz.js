import{a as c,j as e,i as M,R as N}from"./index-D0yRYkRK.js";import{b as O,C as m,u as F,c as A,F as I}from"./index.esm-0Wd5ZTaL.js";import"./FormContainer-CcnkfPvj.js";import"./Button-BDkok-2I.js";import{B as q}from"./BottomStickyBar-B9Gkuokk.js";import{C as G}from"./Card-CWfRWYfe.js";import{I as y}from"./Input-CGGIPAMy.js";import{F as i}from"./FormItem-BzCUTsvV.js";import"./index-BAiP7mQm.js";import"./index-2Mnet4ey.js";import{R as w}from"./FileItem-BgKRNRi7.js";import"./Dialog-B-jFmH1-.js";import"./Drawer-CnBtluTf.js";import"./index-92mjx-Fn.js";import"./index-DUpuQ3pa.js";import"./index-4hbIhcSA.js";import"./cloneDeep-6-NADjKH.js";import{S as C}from"./Select-B-WXjZfd.js";import"./index-B0EMbVo3.js";import"./index-CI41wOCL.js";import"./toast-CHrgrvAn.js";import{g as L}from"./employeeService-8m6wHAGi.js";import{c as V}from"./UserService-BhDRbW5g.js";import{z as n,t as z}from"./index-DMQ2Y9Ia.js";const D=[{value:"Enabled",label:"Enabled"},{value:"Disabled",label:"Disabled"}],k=({control:o,errors:s})=>{var p,g,f,E,P,S,_,B,R;const[t,b]=c.useState([]),[x,d]=c.useState([]),[u,v]=c.useState([]),{setValue:j}=O();return c.useEffect(()=>{(async()=>{try{const a=await L();b(a.employeeData.map(r=>({label:r.full_name,value:r._id}))),d(a.employeeData);const h=await V();v(h.roleList.filter(r=>r.status==="Active").map(r=>({label:r.name,value:r._id})))}catch(a){console.error("Error fetching data:",a)}})()},[]),e.jsxs(G,{children:[e.jsx("h4",{className:"mb-6",children:"Overview"}),e.jsx(i,{label:"Employee",invalid:!!s.employee,errorMessage:(p=s.employee)==null?void 0:p.message,children:e.jsx(m,{name:"employee",control:o,render:({field:l})=>e.jsx(C,{placeholder:"Please Select",options:t,value:t.find(a=>a.value===l.value),onChange:a=>{l.onChange(a==null?void 0:a.value);const h=x.find(r=>r._id===(a==null?void 0:a.value));h&&j("email",h.email)}})})}),e.jsx(i,{label:"Email",invalid:!!s.email,errorMessage:(g=s.email)==null?void 0:g.message,children:e.jsx(m,{name:"email",control:o,render:({field:l})=>e.jsx(y,{type:"text",autoComplete:"off",placeholder:"Last Name",value:l.value,onChange:l.onChange,onBlur:l.onBlur,disabled:!0})})}),e.jsx(i,{label:"Choose Account type",invalid:!!s.account_type,errorMessage:(f=s.account_type)==null?void 0:f.message,children:e.jsx(m,{name:"account_type",control:o,render:({field:l})=>e.jsxs(w.Group,{vertical:!0,value:l.value,onChange:l.onChange,children:[e.jsx(w,{value:"Employee",children:"Employee"}),e.jsx(w,{value:"Admin",children:"Admin"})]})})}),e.jsx(i,{label:"Role",invalid:!!s.role,errorMessage:(E=s.role)==null?void 0:E.message,children:e.jsx(m,{name:"role",control:o,render:({field:l})=>e.jsx(C,{placeholder:"Please Select",options:u,value:u.find(a=>a.value===l.value),onChange:a=>l.onChange(a==null?void 0:a.value)})})}),e.jsx(i,{label:"Status",invalid:!!s.status,errorMessage:(P=s.status)==null?void 0:P.message,children:e.jsx(m,{name:"status",control:o,render:({field:l})=>e.jsx(C,{placeholder:"Please Select",options:D,value:D.find(a=>a.value===l.value),onChange:a=>l.onChange(a==null?void 0:a.value)})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Password",invalid:!!s.password,errorMessage:(S=s.password)==null?void 0:S.message,children:e.jsx(m,{name:"password",control:o,render:({field:l})=>e.jsx(y,{type:"password",autoComplete:"off",placeholder:"Password",value:l.value,onChange:l.onChange})})}),e.jsx(i,{label:"Confirm Password",invalid:!!s.confirm_password,errorMessage:((_=s.confirm_password)==null?void 0:_.message)||((R=(B=s.root)==null?void 0:B.confirm_password)==null?void 0:R.message),children:e.jsx(m,{name:"confirm_password",control:o,render:({field:l})=>e.jsx(y,{type:"password",autoComplete:"off",placeholder:"Confirm Password",value:l.value,onChange:l.onChange})})})]})]})},J=n.object({employee:n.string().min(1,{message:"Employee name is required"}),account_type:n.string().min(1,{message:"Account type is required"}),email:n.string().min(1,{message:"Email is required"}).email({message:"Invalid email address"}),role:n.string().min(1,{message:"Please select a role"}),status:n.string().min(1,{message:"Please select a status"}),password:n.string().min(8,{message:"Password must be at least 8 characters long"}).regex(/[0-9]/,{message:"Password must include a number"}).regex(/[a-z]/,{message:"Password must include a lowercase letter"}).regex(/[A-Z]/,{message:"Password must include an uppercase letter"}).regex(/[!@#$%^&*(),.?":{}|<>]/,{message:"Password must include a special character"}).optional(),confirm_password:n.string().optional()}).superRefine(({password:o,confirm_password:s},t)=>{o&&!s&&t.addIssue({code:"custom",path:["confirm_password"],message:"Please confirm your password"}),o&&s&&o!==s&&t.addIssue({code:"custom",path:["confirm_password"],message:"Passwords don't match"})}),ge=o=>{const{onFormSubmit:s,defaultValues:t={},newCustomer:b=!1,children:x}=o,d=F({defaultValues:{...t},resolver:z(J)}),{handleSubmit:u,reset:v,formState:{errors:j},control:p}=d;c.useEffect(()=>{M(t)||v(t)},[JSON.stringify(t)]);const g=f=>{s==null||s(f)};return e.jsx(A,{...d,children:e.jsxs(I,{className:"flex w-full h-full",containerClassName:"flex flex-col w-full justify-between",onSubmit:u(g),children:[e.jsx(N,{children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsx("div",{className:"gap-4 flex flex-col flex-auto",children:e.jsx(k,{control:p,errors:j})})})}),e.jsx(q,{children:x})]})})};export{ge as C};
