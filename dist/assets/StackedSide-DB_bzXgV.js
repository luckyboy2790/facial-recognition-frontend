import{a as k,i as p,j as e,b as g,d as T,H as E,S as R,e as L,D as M,f as C,u as v,h as w,k as H,l as A,m as V,n as O}from"./index-D0yRYkRK.js";import{L as U}from"./Logo-Nfjv9JcT.js";import{M as N}from"./index-4hbIhcSA.js";import{S as I}from"./ScrollBar-CQJRPbw6.js";import{u as $,N as P,A as F,n as K,a as Y,b as B,H as G,M as Q,L as W,Q as q,U as z}from"./QuickAccessDropdown-Bfe4MQ_9.js";import{V as J}from"./VerticalMenuContent-DLJwjOv4.js";import{H as X,a as Z}from"./Button-BDkok-2I.js";import{u as _}from"./NavToggle-GAqiQEz4.js";import{L as ee,S as te}from"./LayoutBase-Dx7A03C_.js";import"./index-92mjx-Fn.js";import"./index-BF8ULv3O.js";import"./isNil-BZddQIJL.js";import"./toString-Db7_635E.js";import"./isSymbol-DKaeyIQo.js";import"./classNames-CVFWYafE.js";import"./index-BrAlWePZ.js";import"./useMergeRef-Ch7lRZ9Z.js";import"./floating-ui.dom-CV1Qg3mg.js";import"./proxy-CceN8Kfo.js";import"./debounce-D_S4yuNl.js";import"./index-Car4HhLt.js";import"./index-CLuxvRnD.js";import"./_getPrototype-CX1IXfHZ.js";import"./Drawer-CnBtluTf.js";import"./index-C6AgsrmA.js";import"./index-Chjiymov.js";import"./CloseButton-V3ZvNBNU.js";import"./index-BAiP7mQm.js";import"./index-BsIi-NiL.js";import"./Switcher-CqauQy-K.js";import"./index-DUpuQ3pa.js";import"./useControllableState-DfqdUqDh.js";const se=n=>{const{onChange:a,routeKey:s,activeKeys:o,onSetActiveKey:c,direction:m,navigationTree:i,userAuthority:l,mode:d,selectedMenu:u,t:x,...y}=n,{includedRouteTree:r}=$(i,s),f=({key:t,title:h,menu:D,translateKey:b})=>{a({title:h,menu:D,translateKey:b}),c([t])},S=({key:t})=>{a({}),c([t])};k.useEffect(()=>{r.type!==P&&!p(r)&&a({key:r.key,title:r.title,menu:r.subMenu,translateKey:r.translateKey})},[r.key]);const j=o&&o.length>0?o:p(u)?[]:[r.key];return e.jsxs("div",{...y,children:[e.jsx(g,{to:T.authenticatedEntryPath,className:"stacked-mini-nav-header flex items-center justify-center",style:{height:E},children:e.jsx(U,{imgClass:"max-h-10",mode:d,type:"streamline",className:R})}),e.jsx(I,{autoHide:!0,direction:m,children:e.jsx(N,{className:"px-4 pb-4",defaultActiveKeys:j,children:i.map(t=>e.jsx(F,{authority:t.authority,userAuthority:l,children:e.jsx("div",{title:x(t.translateKey,t.title),children:t.subMenu&&t.subMenu.length>0?e.jsx(N.MenuItem,{eventKey:t.key,className:"mb-2",onSelect:()=>f({key:t.key,title:t.title,menu:t.subMenu,translateKey:t.translateKey}),children:e.jsx("div",{className:"text-2xl",children:K[t.icon]})}):e.jsx(g,{to:t.path,className:"flex items-center h-full w-full",onClick:()=>S({key:t.key}),children:e.jsx(N.MenuItem,{eventKey:t.key,className:"mb-2",children:e.jsx("div",{className:"text-2xl",children:K[t.icon]})})})})},t.key))})})]})},ae=n=>{const{className:a,title:s,menu:o,routeKey:c,onCollapse:m,direction:i,translationSetup:l,userAuthority:d,...u}=n,x=()=>{m()};return e.jsxs("div",{className:L("h-full",a),...u,children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:E},children:[e.jsx("h5",{className:"font-bold",children:s}),e.jsxs("button",{type:"button",className:"close-button",onClick:x,children:[i===M&&e.jsx(X,{}),i===C&&e.jsx(Z,{})]})]}),e.jsx(I,{autoHide:!0,direction:i,children:e.jsx(J,{routeKey:c,navigationTree:o,translationSetup:l,userAuthority:d})})]})},ie={width:V},re=({translationSetup:n=T.activeNavTranslation})=>{const{t:a}=Y(!n),[s,o]=k.useState({}),[c,m]=k.useState([]),i=v(t=>t.mode),l=v(t=>t.direction),d=w(t=>t.currentRouteKey),u=H(t=>t.user.authority),{larger:x}=_(),y=(t,h)=>`${t}-${h}`,r=t=>{o(t)},f=()=>{o({}),m([])},S=t=>{m(t)},j=()=>{let t={};const h=`${-A}px`;return l===M&&(t={marginLeft:h}),l===C&&(t={marginRight:h}),t};return e.jsx(e.Fragment,{children:x.md&&e.jsxs("div",{className:"stacked-side-nav",children:[e.jsx(se,{className:`stacked-side-nav-mini ${y("stacked-side-nav-mini",i)}`,style:ie,routeKey:d,activeKeys:c,mode:i,direction:l,navigationTree:B,userAuthority:u||[],selectedMenu:s,t:a,onChange:r,onSetActiveKey:S}),e.jsx("div",{className:`stacked-side-nav-secondary ${y("stacked-side-nav-secondary",i)}`,style:{width:A,...p(s)?j():{}},children:!p(s)&&e.jsx(ae,{title:a(s.translateKey,s.title),menu:s.menu,routeKey:d,direction:l,translationSetup:n,userAuthority:u||[],onCollapse:f})})]})})},Ve=({children:n})=>{const{larger:a,smaller:s}=_();return e.jsx(ee,{type:O,className:"app-layout-stacked-side flex flex-auto flex-col",children:e.jsxs("div",{className:"flex flex-auto min-w-0",children:[a.lg&&e.jsx(re,{}),e.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[e.jsx(G,{className:"shadow dark:shadow-2xl",headerStart:e.jsx(e.Fragment,{children:s.lg&&e.jsx(Q,{})}),headerEnd:e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(te,{}),e.jsx(q,{}),e.jsx(z,{hoverable:!1})]})}),e.jsx("div",{className:"h-full flex flex-auto flex-col",children:n})]})]})})};export{Ve as default};
