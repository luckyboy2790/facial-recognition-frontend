import{a as v,j as e,i as T,R as N}from"./index-D0yRYkRK.js";import{C as n,u as w,F as B}from"./index.esm-0Wd5ZTaL.js";import"./FormContainer-CcnkfPvj.js";import"./Button-BDkok-2I.js";import{B as E}from"./BottomStickyBar-B9Gkuokk.js";import{C as F}from"./Card-CWfRWYfe.js";import{S as b}from"./Select-B-WXjZfd.js";import{F as m}from"./FormItem-BzCUTsvV.js";import"./index-BAiP7mQm.js";import"./index-2Mnet4ey.js";import{b as C,a as _}from"./FileItem-BgKRNRi7.js";import"./Dialog-B-jFmH1-.js";import"./Drawer-CnBtluTf.js";import"./index-92mjx-Fn.js";import"./isNil-BZddQIJL.js";import"./index-DUpuQ3pa.js";import"./index-4hbIhcSA.js";import"./cloneDeep-6-NADjKH.js";import"./index-B0EMbVo3.js";import"./index-CI41wOCL.js";import"./toast-CHrgrvAn.js";import"./context-CCEg-Yz5.js";import"./debounce-D_S4yuNl.js";import{N as $}from"./NumericInput-Buu8NxfF.js";import"./index-DLKOtp8K.js";import{g as I}from"./employeeService-8m6wHAGi.js";import{f as D}from"./format-BzRktsyD.js";import{z as o,t as O}from"./index-DMQ2Y9Ia.js";const M=[{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}],Y=({control:l,errors:t,defaultValues:r})=>{var u,g,p,h,S,y,j;const[d,x]=v.useState([]);v.useEffect(()=>{(async()=>{try{const i=(await I()).employeeData.map(f=>({value:f._id,label:f.full_name}));x(i)}catch(s){console.error("Error fetching data:",s)}})()},[]);const c=()=>{const a=new Date,s=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0");return`${s}-${i}-01`};return e.jsxs(F,{children:[e.jsx("h4",{className:"mb-6",children:"Schedule Edit"}),e.jsx(m,{label:"Employee",invalid:!!t.employee,errorMessage:(u=t.employee)==null?void 0:u.message,children:e.jsx(n,{name:"employee",control:l,render:({field:a})=>e.jsx(b,{className:"mb-4",placeholder:"Please Select",options:d,value:d.find(s=>s.value===a.value),onChange:s=>a.onChange(s==null?void 0:s.value)})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(m,{label:"Start time",invalid:!!t.start_time,errorMessage:(g=t.start_time)==null?void 0:g.message,children:e.jsx(n,{name:"start_time",control:l,defaultValue:(r==null?void 0:r.start_time)||"",render:({field:a})=>e.jsx(C,{value:a.value?new Date(`${c()}T${a.value}`):null,onChange:s=>{s&&a.onChange(D(s,"HH:mm:ss.SSS")+"Z")}})})}),e.jsx(m,{label:"Off Time",invalid:!!t.off_time,errorMessage:(p=t.off_time)==null?void 0:p.message,children:e.jsx(n,{name:"off_time",control:l,defaultValue:(r==null?void 0:r.off_time)||"",render:({field:a})=>e.jsx(C,{value:a.value?new Date(`${c()}T${a.value}`):null,onChange:s=>{s&&a.onChange(D(s,"HH:mm:ss.SSS")+"Z")}})})})]}),e.jsx(m,{label:"From",invalid:!!t.from,errorMessage:(h=t.from)==null?void 0:h.message,children:e.jsx(n,{name:"from",control:l,render:({field:a})=>e.jsx(_,{placeholder:"Date",value:a.value?new Date(a.value):null,onChange:s=>{a.onChange(s?s.toISOString().split("T")[0]:"")}})})}),e.jsx(m,{label:"To",invalid:!!t.to,errorMessage:(S=t.to)==null?void 0:S.message,children:e.jsx(n,{name:"to",control:l,render:({field:a})=>e.jsx(_,{placeholder:"Date",value:a.value?new Date(a.value):null,onChange:s=>{a.onChange(s?s.toISOString().split("T")[0]:"")}})})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsx(m,{label:"Total hours",invalid:!!t.total_hours,errorMessage:(y=t.total_hours)==null?void 0:y.message,children:e.jsx(n,{name:"total_hours",control:l,render:({field:a})=>e.jsx($,{autoComplete:"off",placeholder:"0",...a})})})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsx(m,{label:"Choose Rest days",invalid:!!t.rest_days,errorMessage:(j=t.rest_days)==null?void 0:j.message,children:e.jsx(n,{name:"rest_days",control:l,render:({field:a})=>e.jsx(b,{isMulti:!0,className:"mb-4",placeholder:"Please Select",options:M,value:M.filter(s=>a.value.includes(s.value)),onChange:s=>{const i=s?s.map(f=>f.value):[];a.onChange(i)}})})})})]})},H=o.object({employee:o.string().min(1,{message:"First name required"}),start_time:o.string().regex(/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(\.\d{3})?Z$/,{message:"Invalid time format (HH:mm:ss.SSSZ)"}),off_time:o.string().regex(/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(\.\d{3})?Z$/,{message:"Invalid time format (HH:mm:ss.SSSZ)"}),from:o.string().min(1,{message:"Official Start Date is required"}).regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Invalid date format (YYYY-MM-DD)"}),to:o.string().min(1,{message:"Official Start Date is required"}).regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Invalid date format (YYYY-MM-DD)"}),total_hours:o.string().min(1,{message:"Total hours required"}),rest_days:o.array(o.string())}),ue=l=>{const{onFormSubmit:t,defaultValues:r={},children:d}=l,{handleSubmit:x,reset:c,formState:{errors:u},control:g}=w({defaultValues:{...r},resolver:O(H)});v.useEffect(()=>{T(r)||c(r)},[JSON.stringify(r)]);const p=h=>{t==null||t(h)};return e.jsxs(B,{className:"flex w-full h-full",containerClassName:"flex flex-col w-full justify-between",onSubmit:x(p),children:[e.jsx(N,{children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsx("div",{className:"gap-4 flex flex-col flex-auto",children:e.jsx(Y,{control:g,errors:u,defaultValues:r})})})}),e.jsx(E,{children:d})]})};export{ue as S};
