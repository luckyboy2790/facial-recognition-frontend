import{y as M,j as e,a as r,g as he,a6 as W,a7 as pe}from"./index-D0yRYkRK.js";import{w as B,x as G,y as Ie,a as Ce}from"./index-BF8ULv3O.js";import{i as J}from"./isNil-BZddQIJL.js";import{r as je}from"./toString-Db7_635E.js";import{c as T}from"./classNames-CVFWYafE.js";import{f as be}from"./index-BrAlWePZ.js";import{u as Q,a as Fe,b as A,c as Ne,d as De,f as ye,s as Re,e as Ee,g as Pe,h as we,i as Te,j as Me,k as ke,l as Se,m as qe,n as He,p as Ae,q as Ue,r as Ke,t as Le,v as $e,F as X}from"./useMergeRef-Ch7lRZ9Z.js";import{a as Oe}from"./floating-ui.dom-CV1Qg3mg.js";const Z=t=>{const{asElement:s="div",children:n,className:l,disabled:i,dotIndent:c,eventKey:h,isActive:u,menuItemHeight:d=42,onSelect:o,ref:p,style:f,...a}=t,b=M("menu-item",u&&"menu-item-active",i&&"menu-item-disabled",!i&&"menu-item-hoverable",c&&"items-center gap-2",l),y=R=>{o&&o(h,R)};return e.jsx(s,{ref:p,className:b,style:{height:`${d}px`,...f},onClick:y,...a,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(be,{className:M("text-3xl w-[24px]",!u&&"opacity-25")})}),n]}):e.jsx(e.Fragment,{children:n})})},U=r.createContext({}),Ye=U.Provider,Ve=({placement:t,children:s})=>t&&t.includes("right")?e.jsxs(e.Fragment,{children:[s,e.jsx(B,{})]}):t&&t.includes("left")?e.jsxs(e.Fragment,{children:[e.jsx(G,{}),s]}):t&&t.includes("right")?e.jsxs(e.Fragment,{children:[s,e.jsx(Ie,{})]}):e.jsxs(e.Fragment,{children:[s,e.jsx(Ce,{})]}),_e=t=>{const{className:s,renderTitle:n,children:l,placement:i="bottom-start",disabled:c,ref:h,toggleClassName:u,...d}=t,f=M("dropdown-toggle",s,u,c&&"dropdown-toggle-disabled"),a=M(f,"dropdown-toggle-default");return n?e.jsx("div",{className:f,...d,ref:h,children:n}):e.jsx("div",{ref:h,className:a,...d,children:e.jsx("span",{className:"flex items-center gap-1",children:e.jsx(Ve,{placement:i,children:l})})})};function ee(t){const s=r.useRef(null);return t||s}var q,_;function ze(){if(_)return q;_=1;var t=je(),s=0;function n(l){var i=++s;return t(l)+i}return q=n,q}var We=ze();const Be=he(We),Ge=(t=10)=>{const s=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=n.length,i=t;for(let c=0;c<i;c++)s[c]=n.charAt(Math.floor(Math.random()*l));return s.join("")};function te(t="",s=10){const n=r.useRef(void 0);return n.current||(n.current=`${Be(t)}-${Ge(s)}`),n.current}const Je=t=>{const{asElement:s="li",children:n,active:l,disabled:i,className:c,style:h,eventKey:u,onSelect:d,ref:o=null,...p}=t,{direction:f}=W(),a=r.useContext(U),I=ee(o),v=te("menu-item-"),j=l||!J(a==null?void 0:a.activeKey)&&(a==null?void 0:a.activeKey)===u;return e.jsx("ul",{style:h,className:"relative",...p,children:e.jsxs(Z,{ref:I,disabled:i,asElement:s,id:v,isActive:j,eventKey:u,className:T("dropdown-submenu-item",c),onSelect:d,children:[e.jsx("span",{children:n}),f==="rtl"?e.jsx(G,{}):e.jsx(B,{})]})})},k=r.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1});k.Provider;const S=t=>{const{children:s,title:n,renderTitle:l,disabled:i,toggleClassName:c,menuClass:h,placement:u,trigger:d="click",onOpen:o,ref:p,...f}=t,[a,I]=r.useState(!1),[v,j]=r.useState(!1),[b,y]=r.useState(null),R=r.useRef([]),C=r.useRef([]),{direction:E}=W(),P=r.useContext(k),x=Q(),F=Fe(),m=A(),K=Ne(),N=m!=null,L=g=>{i||(I(g),o==null||o(g))},ne=()=>E==="ltr"?"bottom-start":"bottom-end",oe=()=>E==="ltr"?"right-start":"left-start",{floatingStyles:ae,refs:$,context:D}=De({nodeId:F,open:a,onOpenChange:g=>{L(g)},placement:u||(N?oe():ne()),middleware:[ye(),Re()],whileElementsMounted:Oe}),{isMounted:re,styles:ie}=Ee(D,{common:({side:g})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[g]}),initial:{transform:"translateY(-5%)",opacity:0},duration:200,open:{opacity:1,transform:"translateY(0%)"},close:{opacity:0,transform:"translateY(-5%)"}}),le=Pe(D,{enabled:N||d==="hover",delay:{open:75},handleClose:we({blockPointerEvents:!0})}),ce=Te(D,{event:"mousedown",toggle:!N,ignoreMouse:N}),ue=Me(D,{role:"menu"}),de=ke(D,{bubbles:!0}),me=Se(D,{listRef:R,activeIndex:b,nested:N,onNavigate:y}),fe=qe(D,{listRef:C,onMatch:a?y:void 0,activeIndex:b}),{getReferenceProps:ge,getFloatingProps:ve,getItemProps:xe}=He([le,ue,de,me,fe,...d==="click"?[ce]:[]]);r.useEffect(()=>{if(!x)return;function g(){I(!1),o==null||o(!1)}function w(V){V.nodeId!==F&&V.parentId===m&&(I(!1),o==null||o(!1))}return x.events.on("click",g),x.events.on("menuopen",w),()=>{x.events.off("click",g),x.events.off("menuopen",w)}},[x,F,m]),r.useEffect(()=>{a&&x&&x.events.emit("menuopen",{parentId:m,nodeId:F})},[x,a,F,m]);const O=Ae([$.setReference,K.ref,p]);r.useImperativeHandle(p,()=>({handleDropdownOpen:()=>{I(!0),o==null||o(!0)},handleDropdownClose:()=>{I(!1),o==null||o(!1)}}),[o]);const Y={...ge(P.getItemProps({...f,onFocus(g){var w;(w=f.onFocus)==null||w.call(f,g),j(!1),P.setHasFocusInside(!0)}})),...d==="context"?{onContextMenu:g=>{g.preventDefault(),L(!0)}}:{}};return e.jsxs(Ue,{id:F,children:[N?e.jsx("li",{ref:O,tabIndex:P.activeIndex===K.index?0:-1,"data-open":a?"":void 0,"data-nested":"","data-focus-inside":v?"":void 0,className:T(c,"outline-none"),...Y,children:e.jsx(Je,{children:l||n})}):e.jsx(_e,{ref:O,role:"menuitem","data-open":a?"":void 0,"data-focus-inside":v?"":void 0,className:T(c),disabled:i,placement:u,renderTitle:l,...Y,children:n}),e.jsx(k.Provider,{value:{activeIndex:b,setActiveIndex:y,getItemProps:xe,setHasFocusInside:j,isOpen:a},children:e.jsx(Ke,{elementsRef:R,labelsRef:C,children:re&&e.jsx(Le,{children:e.jsx($e,{context:D,modal:!1,initialFocus:N?-1:0,returnFocus:!N,children:e.jsx("div",{ref:$.setFloating,style:ae,...ve(),className:"outline-none z-30",children:e.jsx("ul",{className:T("dropdown-menu min-w-[160px]",h),style:ie,children:s})})})})})})]})},Qe=({activeKey:t,ref:s,...n})=>A()===null?e.jsx(Ye,{value:{activeKey:t},children:e.jsx(X,{children:e.jsx(S,{...n,ref:s})})}):e.jsx(S,{...n,ref:s}),{DEFAULT:Xe,DIVIDER:Ze,HEADER:z,CUSTOM:H}=pe,et=t=>{const{asElement:s="li",children:n,active:l,disabled:i,className:c,style:h,eventKey:u,onSelect:d,onClick:o,onFocus:p,ref:f=null,variant:a=Xe,...I}=t,v=r.useContext(U),j=r.useContext(k),b=ee(f),y=te("menu-item-"),R=l||!J(v==null?void 0:v.activeKey)&&(v==null?void 0:v.activeKey)===u,C=Q(),E=r.useCallback(m=>{d==null||d(u||"",m),o==null||o(m)},[u,o,d]),P=r.useCallback(m=>{i||(E(m),C==null||C.events.emit("click"))},[i,E,C==null?void 0:C.events]),x={...j.getItemProps({onClick(m){P(m)},onFocus(m){p==null||p(m),j.setHasFocusInside(!0)}})};if(a===Ze||a===z||a===H)return e.jsx(s,{ref:b,id:y,style:h,className:T(`menu-item-${a}`,c),...a===H?x:{},...I,children:(a===z||a===H)&&n});function F(){return r.isValidElement(n)?r.cloneElement(n):n}return e.jsx(Z,{ref:b,asElement:s,style:h,isActive:R,disabled:i,eventKey:u,className:c,...x,...I,children:F()})},tt=({ref:t,...s})=>A()===null?e.jsx(X,{children:e.jsx(S,{...s,ref:t})}):e.jsx(S,{...s,ref:t}),se=Qe;se.Item=et;se.Menu=tt;export{se as D,Z as M,te as u};
